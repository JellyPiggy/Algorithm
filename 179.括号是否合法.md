# n个左括号，n个右括号，任意组合排列，合法的数量和不合法的数量怎么确定？



怎么判断该字符串中的括号是否全都配对，是合法的

**只要满足对于任意一个前缀，右括号数量 <=  左括号数量即可**



对于两个集合A 和 B 如果 A 中的元素都对应B中唯一一个元素，B中的元素都对应A中唯一一个元素，

那么 A集合中元素数量一定等于 B集合中元素数量

![1661478207522](assets/1661478207522.png)





一个不合法集合 A 中一个不合法 x，经过 f 映射，可以得到一个集合B中一个集合 x' ，其 `)`  个数为 n + 1，`(`  个数为 n - 1 的元素，同样B集合中 x' 也可以通过某种映射转为一个不合法集合A中的x，那么A的元素个数就会等于B的元素个数

B集合的个数为：在 2n 个位置中选 n + 1 个位置放 `)` 的方法数，即为： c(2n, n + 1)



注：上面的 f映射为：当前缀中出现 右括号数量大于左括号数量时，就此除去此前缀以外后面的内容 右括号变左括号，左括号变右括号



所以合法的元素个数为：c(2n, n) - c(2n, n + 1)   或 c(2n, n) - c(2n, n - 1)



如果不懂，回看 40   1：52：00





# 扩展：两道简单且原理一样的题

#### 有 n 个数，他们有多少种合理的进出栈的方式？（在前面的数必须先进栈）

这就是一个括号问题，把进栈看成 `(` ，对于任意前缀，都不能出栈的个数比进栈的个数多，就相当于对于每个前缀右括号不能比左括号多

#### 某公司股票交易，开始价值为0，对于每次交易，价值曲线要么往上45°走一次，要么向下45°走一次，请问经过n次交易后价值不低于0的交易方式有多少种？

同理



